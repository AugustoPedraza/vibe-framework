{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "QA to Designer Handoff",
  "description": "Structured data passed from QA Engineer phase to Designer phase",
  "type": "object",
  "required": ["feature_id", "scenarios", "ux_requirements"],
  "properties": {
    "feature_id": {
      "type": "string",
      "description": "Feature identifier (e.g., AUTH-001)",
      "pattern": "^[A-Z]+-[0-9]+$"
    },
    "scenarios": {
      "type": "array",
      "description": "Test scenarios generated from acceptance criteria",
      "items": {
        "type": "object",
        "required": ["name", "test_type", "given", "when", "then"],
        "properties": {
          "name": {
            "type": "string",
            "description": "Scenario name (e.g., 'User logs in with valid credentials')"
          },
          "test_type": {
            "type": "string",
            "enum": ["unit", "integration", "e2e"],
            "description": "Recommended test type for this scenario"
          },
          "given": {
            "type": "string",
            "description": "Precondition (Given clause)"
          },
          "when": {
            "type": "string",
            "description": "Action (When clause)"
          },
          "then": {
            "type": "string",
            "description": "Expected outcome (Then clause)"
          },
          "priority": {
            "type": "string",
            "enum": ["critical", "high", "medium", "low"],
            "default": "medium"
          }
        }
      }
    },
    "ux_requirements": {
      "type": "object",
      "description": "UX states that must be designed",
      "required": ["loading", "error", "empty", "success"],
      "properties": {
        "loading": {
          "type": "boolean",
          "description": "Feature has loading state"
        },
        "error": {
          "type": "boolean",
          "description": "Feature has error state"
        },
        "empty": {
          "type": "boolean",
          "description": "Feature has empty state"
        },
        "success": {
          "type": "boolean",
          "description": "Feature has success state"
        },
        "offline": {
          "type": "boolean",
          "description": "Feature needs offline behavior",
          "default": false
        }
      }
    },
    "accessibility_requirements": {
      "type": "array",
      "description": "Specific accessibility requirements identified",
      "items": {
        "type": "string"
      }
    },
    "platform_considerations": {
      "type": "object",
      "description": "Platform-specific requirements (iOS/Android)",
      "properties": {
        "ios_limitations": {
          "type": "array",
          "items": { "type": "string" }
        },
        "android_specific": {
          "type": "array",
          "items": { "type": "string" }
        }
      }
    },
    "e2e_required": {
      "type": "boolean",
      "description": "Whether E2E tests are mandatory for this feature"
    },
    "notes": {
      "type": "string",
      "description": "Additional context for Designer"
    }
  },
  "example": {
    "feature_id": "AUTH-001",
    "scenarios": [
      {
        "name": "User logs in with valid credentials",
        "test_type": "integration",
        "given": "User is on login page",
        "when": "User enters valid email and password and clicks login",
        "then": "User is redirected to dashboard",
        "priority": "critical"
      },
      {
        "name": "User sees error with invalid credentials",
        "test_type": "integration",
        "given": "User is on login page",
        "when": "User enters invalid credentials and clicks login",
        "then": "Error message is displayed",
        "priority": "high"
      }
    ],
    "ux_requirements": {
      "loading": true,
      "error": true,
      "empty": false,
      "success": true,
      "offline": false
    },
    "accessibility_requirements": [
      "Form inputs must have visible labels",
      "Error messages must be announced to screen readers"
    ],
    "e2e_required": true,
    "notes": "Login is a critical path - full E2E coverage required"
  }
}
