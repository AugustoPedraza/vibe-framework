{
  "project_name": "Example Project",
  "last_updated": "2026-01-22T10:00:00Z",
  "pitfalls": [
    {
      "id": "PIT-001",
      "category": "svelte",
      "description": "Forgetting to export new Svelte component in app.js",
      "example": "User: 'you forgot to add the component to app.js'",
      "solution": "After creating any new Svelte component, add export to assets/svelte/app.js: export { default as ComponentName } from './path/to/Component.svelte'",
      "check": {
        "type": "manual",
        "prompt": "Is the new component exported in assets/svelte/app.js?"
      },
      "severity": "blocker",
      "applies_to": ["all features with new components"],
      "times_caught": 0,
      "times_missed": 0
    },
    {
      "id": "PIT-002",
      "category": "liveview",
      "description": "Missing socket={@socket} prop in LiveSvelte component",
      "example": "User: 'you forgot to add socket={@socket}'",
      "solution": "Always include socket={@socket} when using <.svelte> component in LiveView templates",
      "check": {
        "type": "grep_pattern",
        "pattern": "<\\.svelte[^>]*name=",
        "paths": ["lib/**/*_live.ex", "lib/**/*_live/*.ex", "lib/**/*.html.heex"],
        "should_match": true
      },
      "severity": "blocker",
      "applies_to": ["features using LiveSvelte"],
      "times_caught": 0,
      "times_missed": 0
    },
    {
      "id": "PIT-003",
      "category": "css",
      "description": "Using raw Tailwind colors instead of design tokens",
      "example": "Found: 'bg-blue-500' instead of 'bg-primary'",
      "solution": "Use design tokens from tailwind.config.js: bg-primary, text-secondary, etc.",
      "check": {
        "type": "grep_pattern",
        "pattern": "bg-(red|blue|green|yellow|purple|pink|gray)-[0-9]+",
        "paths": ["assets/svelte/**/*.svelte"],
        "should_match": false
      },
      "severity": "warning",
      "applies_to": ["all UI work"],
      "times_caught": 0,
      "times_missed": 0
    },
    {
      "id": "PIT-004",
      "category": "css",
      "description": "Hardcoded z-index instead of using design tokens",
      "example": "Found: 'z-50' instead of 'z-modal' or 'z-dropdown'",
      "solution": "Use z-index tokens: z-dropdown, z-modal, z-toast, z-tooltip",
      "check": {
        "type": "grep_pattern",
        "pattern": "z-\\[?[0-9]+\\]?",
        "paths": ["assets/svelte/**/*.svelte"],
        "should_match": false
      },
      "severity": "warning",
      "applies_to": ["components with layering"],
      "times_caught": 0,
      "times_missed": 0
    },
    {
      "id": "PIT-005",
      "category": "ux",
      "description": "Missing UX states (loading/error/empty/success)",
      "example": "Component only handles success state, no loading or error handling",
      "solution": "Every data-driven component needs 4 states: loading (skeleton), error (message + retry), empty (helpful message), success (data display)",
      "check": {
        "type": "manual",
        "prompt": "Does this component handle loading, error, empty, and success states?"
      },
      "severity": "warning",
      "applies_to": ["data-fetching components", "forms", "lists"],
      "times_caught": 0,
      "times_missed": 0
    },
    {
      "id": "PIT-006",
      "category": "testing",
      "description": "Test file in wrong directory (not discovered by test runner)",
      "example": "Created test at 'test/accounts_test.exs' instead of 'test/syna/accounts_test.exs'",
      "solution": "Backend tests: test/{app_name}/... Frontend tests: assets/svelte/**/__tests__/*.test.ts",
      "check": {
        "type": "manual",
        "prompt": "Is the test file in the correct directory structure?"
      },
      "severity": "blocker",
      "applies_to": ["all test creation"],
      "times_caught": 0,
      "times_missed": 0
    },
    {
      "id": "PIT-007",
      "category": "ash",
      "description": "Missing require_atomic?: false for non-atomic updates",
      "example": "Ash action failed with 'cannot atomically update' error",
      "solution": "Add 'require_atomic? false' to updates that use external data or complex logic",
      "check": {
        "type": "manual",
        "prompt": "Do update actions that use external data have 'require_atomic? false'?"
      },
      "severity": "warning",
      "applies_to": ["Ash resource updates"],
      "times_caught": 0,
      "times_missed": 0
    },
    {
      "id": "PIT-008",
      "category": "liveview",
      "description": "Forgetting phx-feedback-for on form error containers",
      "example": "Form errors not showing because phx-feedback-for attribute missing",
      "solution": "Add phx-feedback-for={field.name} to error message containers",
      "check": {
        "type": "grep_pattern",
        "pattern": "phx-feedback-for",
        "paths": ["lib/**/*_live.ex", "lib/**/*.html.heex"],
        "should_match": true
      },
      "severity": "warning",
      "applies_to": ["form components"],
      "times_caught": 0,
      "times_missed": 0
    },
    {
      "id": "PIT-009",
      "category": "elixir",
      "description": "Missing alias for newly created module",
      "example": "Compilation failed: undefined function MyModule.function/1",
      "solution": "After creating a new module, add alias at the top of files that use it",
      "check": {
        "type": "manual",
        "prompt": "Are all new modules properly aliased where they're used?"
      },
      "severity": "blocker",
      "applies_to": ["new module creation"],
      "times_caught": 0,
      "times_missed": 0
    },
    {
      "id": "PIT-010",
      "category": "testing",
      "description": "Not running tests after implementation",
      "example": "Claimed tests pass but mix test wasn't actually run",
      "solution": "ALWAYS run `mix test path/to/test.exs` and show output before claiming tests pass",
      "check": {
        "type": "manual",
        "prompt": "Was `mix test` actually executed and output shown?"
      },
      "severity": "blocker",
      "applies_to": ["all TDD phases"],
      "times_caught": 0,
      "times_missed": 0
    }
  ]
}
